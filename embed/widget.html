<html>
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">


    <title>Widget Webook integration example</title>

    <style>
        body, html {
        }

        .webook-widget-container {
            height: 100px;
            display: flex;
            justify-content: center;
        }

        .webook-widget-iframe {
            width: 702px;
            height: 100%;
            border: none;
            min-height: 500px
        }
    </style>
</head>
<body>
<div style=" display: flex; justify-content: center; flex-direction: column">

    <div style=" display: flex; justify-content: center">
        <div style="background-color: lightblue; height: 50px; display: flex; justify-content: center; align-items: center; margin-bottom: 20px; min-width:300px;max-width:400px;align-self: center; border-radius: 10px ">
            Other content before iframe
        </div>
    </div>
    
    <div class="webook-widget-container" id="webookWidgetIframe">
        <iframe class="webook-widget-iframe"
                src="https://www.webook.live/order/631f29922d95f4da6c05b077/631f29922d95f4da6c05b076/633089d0cefe88c21670a08e?language=he"></iframe>
    </div>


    <div style=" display: flex; justify-content: center">
        <div style="background-color: lightblue; height: 50px; display: flex; justify-content: center; align-items: center; margin-top: 20px; min-width:300px;max-width:400px;align-self: center; border-radius: 10px ">
            Other content after iframe
        </div>
    </div>
</div>

</body>
</html>

<script type="text/javascript">
    const frameId = 'webookWidgetIframe'
    const iframe = document.getElementById(frameId);

    window.addEventListener('message', function (event) {

        if (event.data && event.data.height) {
            iframe.style.height = event.data.height + 'px';
        }
        if (event.data && event.data.width) {
            iframe.style.width = event.data.width + 'px';
        }
    });

    function getQueryParams() {
        const params = new URLSearchParams(window.location.search);
        return params.toString();
    }

    function propagateQueryParams() {
        let iframeSrc = iframe.src;
        const queryParams = getQueryParams();
        if (queryParams) {
            iframeSrc += (iframeSrc.includes('?') ? '&' : '?') + queryParams;
        }
        iframe.src = iframeSrc;
    }

    propagateQueryParams()
</script>
